<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3 Domain Classes 2.0-RC6</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction to the Spring Security Plugin</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/newInV2.html"><strong>2</strong><span>What's New in Version 2.0</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/domainClasses.html"><strong>3</strong><span>Domain Classes</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/requestMappings.html"><strong>4</strong><span>Configuring Request Mappings to Secure URLs</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/helperClasses.html"><strong>5</strong><span>Helper Classes</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/events.html"><strong>6</strong><span>Events</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/domainClassProperties.html"><strong>7</strong><span>User, Authority (Role), and Requestmap Properties</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/authentication.html"><strong>8</strong><span>Authentication</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/authenticationProviders.html"><strong>9</strong><span>Authentication Providers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/userDetailsService.html"><strong>10</strong><span>Custom UserDetailsService</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/passwords.html"><strong>11</strong><span>Password and Account Protection</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/urlProperties.html"><strong>12</strong><span>URL Properties</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/hierarchicalRoles.html"><strong>13</strong><span>Hierarchical Roles</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/switchUser.html"><strong>14</strong><span>Switch User</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/filters.html"><strong>15</strong><span>Filters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/channelSecurity.html"><strong>16</strong><span>Channel Security</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/ip.html"><strong>17</strong><span>IP Address Restrictions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/sessionFixation.html"><strong>18</strong><span>Session Fixation Prevention</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/logoutHandlers.html"><strong>19</strong><span>Logout Handlers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/voters.html"><strong>20</strong><span>Voters</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/miscProperties.html"><strong>21</strong><span>Miscellaneous Properties</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/tutorials.html"><strong>22</strong><span>Tutorials</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/controllerMetaClassMethods.html"><strong>23</strong><span>Controller MetaClass Methods</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/i18n.html"><strong>24</strong><span>Internationalization</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>Spring Security Core plugin</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/newInV2.html">&lt;&lt; <strong>2</strong><span>What's New in Version 2.0</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/requestMappings.html"><strong>4</strong><span>Configuring Request Mappings to Secure URLs</span> >></a></div>
                


                <div class="project">
                    <h1>3 Domain Classes - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Burt Beckwith, Beverley Talbott</p>

                    <p><strong>Version:</strong> 2.0-RC6</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#personClass"><strong>3.1</strong><span>Person Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#authorityClass"><strong>3.2</strong><span>Authority Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#personAuthorityClass"><strong>3.3</strong><span>PersonAuthority Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#authorityGroupClass"><strong>3.4</strong><span>Group Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#personAuthorityGroupClass"><strong>3.5</strong><span>PersonGroup Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#authorityGroupAuthorityClass"><strong>3.6</strong><span>GroupAuthority Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#requestmapClass"><strong>3.7</strong><span>Requestmap Class</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="domainClasses">3 Domain Classes</h1>
By default the plugin uses regular Grails domain classes to access its required data. It's easy to create your own user lookup code though, which can access the database or any other source to retrieve user and authority data. See <a href="../guide/single.html#userDetailsService" class="guide">Custom UserDetailsService</a> for how to implement this.<p class="paragraph"/>To use the standard user lookup you'll need at a minimum a 'person' and an 'authority' domain class. In addition, if you want to store URL&#60;-&#62;Role mappings in the database (this is one of multiple approaches for defining the mappings) you need a 'requestmap' domain class. If you use the recommended approach for mapping the many-to-many relationship between 'person' and 'authority,' you also need a domain class to map the join table.<p class="paragraph"/>To use the user/group lookup you'll also need a 'group' domain class. If you are using the recommended approach for mapping many-to-many relationship between 'person' and 'group' and between 'group' and 'authority' you'll need a domain class for each to map the join tables. You can still additionally use 'requestmap' with this approach.<p class="paragraph"/>The <a href="../ref/Scripts/s2-quickstart.html" class="Scripts">s2-quickstart</a> script creates initial domain classes for you. You specify the package and class names, and it creates the corresponding domain classes. After that you can customize them as you like. You can add unlimited fields, methods, and so on, as long as the core security-related functionality remains.



<h2 id="personClass">3.1 Person Class</h2>
Spring Security uses an <a href="https://docs.spring.io/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/core/Authentication.html" target="blank">Authentication</a> object to determine whether the current user has the right to perform a secured action, such as accessing a URL, manipulating a secured domain object, accessing a secured method, and so on. This object is created during login. Typically overlap occurs between the need for authentication data and the need to represent a user in the application in ways that are unrelated to security. The mechanism for populating the authentication is completely pluggable in Spring Security; you only need to provide an implementation of <a href="https://docs.spring.io/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html" target="blank">UserDetailsService</a> and implement its one method, <code>loadUserByUsername()</code>.<p class="paragraph"/>By default the plugin uses a Grails 'person' domain class to manage this data. <code>username</code>, <code>enabled</code>, <code>password</code> are the default names of the core required properties. You can easily <a href="../guide/single.html#userDetailsService" class="guide">plug in your own implementation</a>, and rename the class, package, and fields. In addition, you should define an <code>authorities</code> property to retrieve roles; this can be a public field or a <code>getAuthorities()</code> method, and it can be defined through a traditional GORM many-to-many or a custom mapping.<p class="paragraph"/>Assuming you choose <code>com.mycompany.myapp</code> as your package, and <code>User</code> as your class name, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/>class User <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   <span class="java&#45;keyword">transient</span> springSecurityService<p class="paragraph"/>   <span class="java&#45;object">String</span> username
   <span class="java&#45;object">String</span> password
   <span class="java&#45;object">boolean</span> enabled = <span class="java&#45;keyword">true</span>
   <span class="java&#45;object">boolean</span> accountExpired
   <span class="java&#45;object">boolean</span> accountLocked
   <span class="java&#45;object">boolean</span> passwordExpired<p class="paragraph"/>   User(<span class="java&#45;object">String</span> username, <span class="java&#45;object">String</span> password) &#123;
      <span class="java&#45;keyword">this</span>()
      <span class="java&#45;keyword">this</span>.username = username
      <span class="java&#45;keyword">this</span>.password = password
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">int</span> hashCode() &#123;
      username?.hashCode() ?: 0
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">boolean</span> equals(other) &#123;
      is(other) || (other <span class="java&#45;keyword">instanceof</span> User &#38;&#38; other.username == username)
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">String</span> toString() &#123;
      username
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> transients = &#91;'springSecurityService'&#93;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      username blank: <span class="java&#45;keyword">false</span>, unique: <span class="java&#45;keyword">true</span>
      password blank: <span class="java&#45;keyword">false</span>
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      password column: '`password`'
   &#125;<p class="paragraph"/>   Set&#60;Role&#62; getAuthorities() &#123;
      UserRole.findAllByUser(<span class="java&#45;keyword">this</span>)&#42;.role
   &#125;<p class="paragraph"/>   def beforeInsert() &#123;
      encodePassword()
   &#125;<p class="paragraph"/>   def beforeUpdate() &#123;
      <span class="java&#45;keyword">if</span> (isDirty('password')) &#123;
         encodePassword()
      &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">protected</span> void encodePassword() &#123;
      password = springSecurityService?.passwordEncoder ? springSecurityService.encodePassword(password) : password
   &#125;
&#125;</pre></div><p class="paragraph"/>Optionally, add other properties such as <code>email</code>, <code>firstName</code>, <code>lastName</code>, and convenience methods, and so on:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/>class User <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   <span class="java&#45;keyword">transient</span> springSecurityService<p class="paragraph"/>   <span class="java&#45;object">String</span> username
   <span class="java&#45;object">String</span> password
   <span class="java&#45;object">boolean</span> enabled = <span class="java&#45;keyword">true</span>
   <span class="java&#45;object">String</span> email
   <span class="java&#45;object">String</span> firstName
   <span class="java&#45;object">String</span> lastName
   <span class="java&#45;object">boolean</span> accountExpired
   <span class="java&#45;object">boolean</span> accountLocked
   <span class="java&#45;object">boolean</span> passwordExpired<p class="paragraph"/>   User(<span class="java&#45;object">String</span> username, <span class="java&#45;object">String</span> password) &#123;
      <span class="java&#45;keyword">this</span>()
      <span class="java&#45;keyword">this</span>.username = username
      <span class="java&#45;keyword">this</span>.password = password
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">int</span> hashCode() &#123;
      username?.hashCode() ?: 0
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">boolean</span> equals(other) &#123;
      is(other) || (other <span class="java&#45;keyword">instanceof</span> User &#38;&#38; other.username == username)
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">String</span> toString() &#123;
      username
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> transients = &#91;'springSecurityService'&#93;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      username blank: <span class="java&#45;keyword">false</span>, unique: <span class="java&#45;keyword">true</span>
      password blank: <span class="java&#45;keyword">false</span>
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      password column: '`password`'
   &#125;<p class="paragraph"/>   Set&#60;Role&#62; getAuthorities() &#123;
      UserRole.findAllByUser(<span class="java&#45;keyword">this</span>)&#42;.role
   &#125;<p class="paragraph"/>   def someMethod &#123;
      &#8230;
   &#125;<p class="paragraph"/>   def beforeInsert() &#123;
      encodePassword()
   &#125;<p class="paragraph"/>   def beforeUpdate() &#123;
      <span class="java&#45;keyword">if</span> (isDirty('password')) &#123;
         encodePassword()
      &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">protected</span> void encodePassword() &#123;
      password = springSecurityService?.passwordEncoder ? springSecurityService.encodePassword(password) : password
   &#125;
&#125;</pre></div><p class="paragraph"/>The <code>getAuthorities()</code> method is analagous to defining <code>static hasMany = &#91;authorities: Authority&#93;</code> in a traditional many-to-many mapping. This way <code>GormUserDetailsService</code> can call <code>user.authorities</code> during login to retrieve the roles without the overhead of a bidirectional many-to-many mapping.<p class="paragraph"/>The class and property names are configurable using these configuration attributes:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>userLookup.userDomainClassName</td><td>none</td><td>User class name</td></tr><tr class="table-even"><td>userLookup.usernamePropertyName</td><td>'username'</td><td>User class username field</td></tr><tr class="table-odd"><td>userLookup.passwordPropertyName</td><td>'password'</td><td>User class password field</td></tr><tr class="table-even"><td>userLookup.authoritiesPropertyName</td><td>'authorities'</td><td>User class role collection field</td></tr><tr class="table-odd"><td>userLookup.enabledPropertyName</td><td>'enabled'</td><td>User class enabled field</td></tr><tr class="table-even"><td>userLookup.accountExpiredPropertyName</td><td>'accountExpired'</td><td>User class account expired field</td></tr><tr class="table-odd"><td>userLookup.accountLockedPropertyName</td><td>'accountLocked'</td><td>User class account locked field</td></tr><tr class="table-even"><td>userLookup.passwordExpiredPropertyName</td><td>'passwordExpired'</td><td>User class password expired field</td></tr><tr class="table-odd"><td>userLookup.authorityJoinClassName</td><td>'PersonAuthority'</td><td>User/Role many-many join class name</td></tr></table>



<h2 id="authorityClass">3.2 Authority Class</h2>
The Spring Security plugin also requires an 'authority' class to represent a user's role(s) in the application. In general this class restricts URLs to users who have been assigned the required access rights. A user can have multiple roles to indicate various access rights in the application, and should have at least one. A basic user who can access only non-restricted resources but can still authenticate is a bit unusual. Spring Security usually functions fine if a user has no granted authorities, but fails in a few places that assume one or more. So if a user authenticates successfully but has no granted roles, the plugin grants the user a 'virtual' role, <code>ROLE_NO_ROLES</code>. Thus the user satisfies Spring Security's requirements but cannot access secure resources, as you would not associate any secure resources with this role.<p class="paragraph"/>Like the 'person' class, the 'authority' class has a default name, <code>Authority</code>, and a default name for its one required property, <code>authority</code>.
If you want to use another existing domain class, it simply has to have a property for name. As with the name of the class, the names of the properties can be whatever you want - they're specified in <code>grails-app/conf/Config.groovy</code>.<p class="paragraph"/>Assuming you choose <code>com.mycompany.myapp</code> as your package, and <code>Role</code> as your class name, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/>class Role <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   <span class="java&#45;object">String</span> authority<p class="paragraph"/>   Role(<span class="java&#45;object">String</span> authority) &#123;
      <span class="java&#45;keyword">this</span>()
      <span class="java&#45;keyword">this</span>.authority = authority
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">int</span> hashCode() &#123;
      authority?.hashCode() ?: 0
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">boolean</span> equals(other) &#123;
      is(other) || (other <span class="java&#45;keyword">instanceof</span> Role &#38;&#38; other.authority == authority)
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">String</span> toString() &#123;
      authority
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      cache <span class="java&#45;keyword">true</span>
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      authority blank: <span class="java&#45;keyword">false</span>, unique: <span class="java&#45;keyword">true</span>
   &#125;
&#125;</pre></div><p class="paragraph"/>The class and property names are configurable using these configuration attributes:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>authority.className</td><td>none</td><td>Role class name</td></tr><tr class="table-even"><td>authority.nameField</td><td>'authority'</td><td>Role class role name field</td></tr></table><p class="paragraph"/><blockquote class="note">
Role names must start with "ROLE_". This is configurable in Spring Security, but not in the plugin. It would be possible to allow different prefixes, but it's important that the prefix not be blank as the prefix is used to differentiate between role names and tokens such as IS_AUTHENTICATED_FULLY/IS_AUTHENTICATED_ANONYMOUSLY/etc., and SpEL expressions.<p class="paragraph"/>The role names should be primarily an internal implementation detail; if you want to display friendlier names in a UI, it's simple to remove the prefix first.
</blockquote>



<h2 id="personAuthorityClass">3.3 PersonAuthority Class</h2>
The typical approach to mapping the relationship between 'person' and 'authority' is a many-to-many. Users have multiple roles, and roles are shared by multiple users. This approach can be problematic in Grails, because a popular role, for example, <code>ROLE_USER</code>, will be granted to many users in your application. GORM uses collections to manage adding and removing related instances and maps many-to-many relationships bidirectionally. Granting a role to a user requires loading all existing users who have that role because the collection is a <code>Set</code>. So even though no uniqueness concerns may exist, Hibernate loads them all to enforce uniqueness. The recommended approach in the plugin is to map a domain class to the join table that manages the many-to-many, and using that to grant and revoke roles to users.<p class="paragraph"/>Like the other domain classes, this class is generated for you, so you don't need to deal with the details of mapping it. Assuming you choose <code>com.mycompany.myapp</code> as your package, and <code>User</code> and <code>Role</code> as your class names, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/><span class="java&#45;keyword">import</span> groovy.transform.ToString<p class="paragraph"/><span class="java&#45;keyword">import</span> org.apache.commons.lang.builder.HashCodeBuilder<p class="paragraph"/>@ToString(cache=<span class="java&#45;keyword">true</span>, includeNames=<span class="java&#45;keyword">true</span>, includePackage=<span class="java&#45;keyword">false</span>)
class UserRole <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   User user
   Role role<p class="paragraph"/>   <span class="java&#45;object">boolean</span> equals(other) &#123;
      <span class="java&#45;keyword">if</span> (!(other <span class="java&#45;keyword">instanceof</span> UserRole)) &#123;
         <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span>
      &#125;<p class="paragraph"/>      other.user?.id == user?.id &#38;&#38;
      other.role?.id == role?.id
   &#125;<p class="paragraph"/>   <span class="java&#45;object">int</span> hashCode() &#123;
      def builder = <span class="java&#45;keyword">new</span> HashCodeBuilder()
      <span class="java&#45;keyword">if</span> (user) builder.append(user.id)
      <span class="java&#45;keyword">if</span> (role) builder.append(role.id)
      builder.toHashCode()
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> UserRole get(<span class="java&#45;object">long</span> userId, <span class="java&#45;object">long</span> roleId) &#123;
      UserRole.where &#123; user.id == userId &#38;&#38; role.id == roleId &#125;.get()
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> <span class="java&#45;object">boolean</span> exists(<span class="java&#45;object">long</span> userId, <span class="java&#45;object">long</span> roleId) &#123;
      UserRole.where &#123; user.id == userId &#38;&#38; role.id == roleId &#125;.count() &#62; 0
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> UserRole create(User user, Role role, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      def instance = <span class="java&#45;keyword">new</span> UserRole(user: user, role: role)
      instance.save(flush: flush, insert: <span class="java&#45;keyword">true</span>)
      instance
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> <span class="java&#45;object">boolean</span> remove(User u, Role r, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (u == <span class="java&#45;keyword">null</span> || r == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span><p class="paragraph"/>      <span class="java&#45;object">int</span> rowCount = UserRole.where &#123; user == u &#38;&#38; role == r &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; UserRole.withSession &#123; it.flush() &#125; &#125;<p class="paragraph"/>      rowCount &#62; 0
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> void removeAll(User u, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (u == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span><p class="paragraph"/>      UserRole.where &#123; user == u &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; UserRole.withSession &#123; it.flush() &#125; &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> void removeAll(Role r, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (r == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span><p class="paragraph"/>      UserRole.where &#123; role == r &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; UserRole.withSession &#123; it.flush() &#125; &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      role validator: &#123; Role r, UserRole ur &#45;&#62;
         <span class="java&#45;keyword">if</span> (ur.user == <span class="java&#45;keyword">null</span> || ur.user.id == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span>
         <span class="java&#45;object">boolean</span> existing = <span class="java&#45;keyword">false</span>
         UserRole.withNewSession &#123;
            existing = UserRole.exists(ur.user.id, r.id)
         &#125;
         <span class="java&#45;keyword">if</span> (existing) &#123;
            <span class="java&#45;keyword">return</span> 'userRole.exists'
         &#125;
      &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      id composite: &#91;'user', 'role'&#93;
      version <span class="java&#45;keyword">false</span>
   &#125;
&#125;</pre></div><p class="paragraph"/>The helper methods make it easy to grant or revoke roles. Assuming you have already loaded a user and a role, you grant the role to the user as follows:<p class="paragraph"/><div class="code"><pre>User user = &#8230;
Role role = &#8230;
UserRole.create user, role</pre></div><p class="paragraph"/>Or by using the 3-parameter version to trigger a flush:<p class="paragraph"/><div class="code"><pre>User user = &#8230;
Role role = &#8230;
UserRole.create user, role, <span class="java&#45;keyword">true</span></pre></div><p class="paragraph"/>Revoking a role is similar:<p class="paragraph"/><div class="code"><pre>User user = &#8230;
Role role = &#8230;
UserRole.remove user, role</pre></div><p class="paragraph"/>Or:<p class="paragraph"/><div class="code"><pre>User user = &#8230;
Role role = &#8230;
UserRole.remove user, role, <span class="java&#45;keyword">true</span></pre></div><p class="paragraph"/>The class name is the only configurable attribute:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>userLookup.authorityJoinClassName</td><td>'PersonAuthority'</td><td>User/Role many-many join class name</td></tr></table>



<h2 id="authorityGroupClass">3.4 Group Class</h2>
This Spring Security plugin provides you the option of creating an access inheritance level between 'person' and 'authority': the 'group'. The next three classes you will read about (including this one) are only used in a 'person'/'group'/'authority' implementation. Rather than giving a 'person' authorities directly, you can create a 'group', map authorities to it, and then map a 'person' to that 'group'. For applications that have a one or more groups of users who need the same level of access, having one or more 'group' instances makes managing changes to access levels easier because the authorities that make up that access level are encapsulated in the 'group', and a single change will affect all of the users.<p class="paragraph"/>If you run the <a href="../ref/Scripts/s2-quickstart.html" class="Scripts">s2-quickstart</a> script with the group name specified and use <code>com.mycompany.myapp</code> as your package and <code>RoleGroup</code> and <code>Role</code> as your class names, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/>class RoleGroup <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   <span class="java&#45;object">String</span> name<p class="paragraph"/>   RoleGroup(<span class="java&#45;object">String</span> name) &#123;
      <span class="java&#45;keyword">this</span>()
      <span class="java&#45;keyword">this</span>.name = name
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">int</span> hashCode() &#123;
      name?.hashCode() ?: 0
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">boolean</span> equals(other) &#123;
      is(other) || (other <span class="java&#45;keyword">instanceof</span> RoleGroup &#38;&#38; other.name == name)
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">String</span> toString() &#123;
      name
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      cache <span class="java&#45;keyword">true</span>
   &#125;<p class="paragraph"/>   Set&#60;Role&#62; getAuthorities() &#123;
      RoleGroupRole.findAllByRoleGroup(<span class="java&#45;keyword">this</span>).collect &#123; it.role &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      name blank: <span class="java&#45;keyword">false</span>, unique: <span class="java&#45;keyword">true</span>
   &#125;
&#125;</pre></div><p class="paragraph"/>When running the <a href="../ref/Scripts/s2-quickstart.html" class="Scripts">s2-quickstart</a> script with the group name specified, the 'person' class will be generated differently to accommodate the use of groups. Assuming you use <code>com.mycompany.myapp</code> as your package and <code>User</code> and <code>RoleGroup</code> as your class names, the <code>getAuthorities()</code> method will be generated like so:<p class="paragraph"/><div class="code"><pre>Set&#60;RoleGroup&#62; getAuthorities() &#123;
   UserRoleGroup.findAllByUser(<span class="java&#45;keyword">this</span>).collect &#123; it.roleGroup &#125;
&#125;</pre></div><p class="paragraph"/>The plugin assumes the attribute <code>authorities</code> will provide the 'authority' collection for each class, but you can change the field names in <code>grails-app/conf/Config.groovy</code>. You also must ensure that the property <code>useRoleGroups</code> is set to <code>true</code> in order for <code>GormUserDetailsService</code> to properly attain the <code>authorities</code>.<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Assigned Value Using s2QuickstartGroups</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>useRoleGroups</td><td>false</td><td>true</td><td>Use 'authority group' implementation when loading user authorities</td></tr><tr class="table-even"><td>authority.groupAuthorityNameField</td><td>null</td><td>'authorities'</td><td>AuthorityGroup class role collection field</td></tr></table>



<h2 id="personAuthorityGroupClass">3.5 PersonGroup Class</h2>
The typical approach to mapping the relationship between 'person' and 'group' is a many-to-many. In a standard implementation, users have multiple roles, and roles are shared by multiple users. In a group implementation, users have multiple groups, and groups are shared by multiple users. For the same reason we would use a join class between 'person' and 'authority', we should use one between 'person' and 'group'. Please note that when using groups, there should not be a join class between 'person' and 'authority', since 'group' resides between the two.<p class="paragraph"/>If you run the <a href="../ref/Scripts/s2-quickstart.html" class="Scripts">s2-quickstart</a> script with the group name specified, this class will be generated for you, so you don't need to deal with the details of mapping it. Assuming you choose <code>com.mycompany.myapp</code> as your package, and <code>User</code> and <code>RoleGroup</code> as your class names, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/><span class="java&#45;keyword">import</span> groovy.transform.ToString<p class="paragraph"/><span class="java&#45;keyword">import</span> org.apache.commons.lang.builder.HashCodeBuilder<p class="paragraph"/>@ToString(cache=<span class="java&#45;keyword">true</span>, includeNames=<span class="java&#45;keyword">true</span>, includePackage=<span class="java&#45;keyword">false</span>)
class UserRoleGroup <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   User user
   RoleGroup roleGroup<p class="paragraph"/>   <span class="java&#45;object">boolean</span> equals(other) &#123;
      <span class="java&#45;keyword">if</span> (!(other <span class="java&#45;keyword">instanceof</span> UserRoleGroup)) &#123;
         <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span>
      &#125;<p class="paragraph"/>      other.user?.id == user?.id &#38;&#38;
      other.roleGroup?.id == roleGroup?.id
   &#125;<p class="paragraph"/>   <span class="java&#45;object">int</span> hashCode() &#123;
      def builder = <span class="java&#45;keyword">new</span> HashCodeBuilder()
      <span class="java&#45;keyword">if</span> (user) builder.append(user.id)
      <span class="java&#45;keyword">if</span> (roleGroup) builder.append(roleGroup.id)
      builder.toHashCode()
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> UserRoleGroup get(<span class="java&#45;object">long</span> userId, <span class="java&#45;object">long</span> roleGroupId) &#123;
      UserRoleGroup.where &#123;
         user == User.load(userId) &#38;&#38;
         roleGroup == RoleGroup.load(roleGroupId)
      &#125;.get()
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> <span class="java&#45;object">boolean</span> exists(<span class="java&#45;object">long</span> userId, <span class="java&#45;object">long</span> roleGroupId) &#123;
      UserRoleGroup.where &#123;
         user == User.load(userId) &#38;&#38;
         roleGroup == RoleGroup.load(roleGroupId)
      &#125;.count() &#62; 0
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> UserRoleGroup create(User user, RoleGroup roleGroup, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      def instance = <span class="java&#45;keyword">new</span> UserRoleGroup(user: user, roleGroup: roleGroup)
      instance.save(flush: flush, insert: <span class="java&#45;keyword">true</span>)
      instance
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> <span class="java&#45;object">boolean</span> remove(User u, RoleGroup g, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (u == <span class="java&#45;keyword">null</span> || g == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span><p class="paragraph"/>      <span class="java&#45;object">int</span> rowCount = UserRoleGroup.where &#123;
         user == User.load(u.id) &#38;&#38;
         roleGroup == RoleGroup.load(g.id)
      &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; UserRoleGroup.withSession &#123; it.flush() &#125; &#125;<p class="paragraph"/>      rowCount &#62; 0
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> void removeAll(User u, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (u == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span><p class="paragraph"/>      UserRoleGroup.where &#123;
         user == User.load(u.id)
      &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; UserRoleGroup.withSession &#123; it.flush() &#125; &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> void removeAll(RoleGroup g, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (g == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span><p class="paragraph"/>      UserRoleGroup.where &#123;
         roleGroup == RoleGroup.load(g.id)
      &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; UserRoleGroup.withSession &#123; it.flush() &#125; &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      user validator: &#123; User u, UserRoleGroup ug &#45;&#62;
         <span class="java&#45;keyword">if</span> (ug.roleGroup == <span class="java&#45;keyword">null</span> || ug.roleGroup.id == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span>
         <span class="java&#45;object">boolean</span> existing = <span class="java&#45;keyword">false</span>
         UserRoleGroup.withNewSession &#123;
            existing = UserRoleGroup.exists(u.id, ug.roleGroup.id)
         &#125;
         <span class="java&#45;keyword">if</span> (existing) &#123;
            <span class="java&#45;keyword">return</span> 'userGroup.exists'
         &#125;
      &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      id composite: &#91;'roleGroup', 'user'&#93;
      version <span class="java&#45;keyword">false</span>
   &#125;
&#125;</pre></div>



<h2 id="authorityGroupAuthorityClass">3.6 GroupAuthority Class</h2>
The typical approach to mapping the relationship between 'group' and 'authority' is a many-to-many. In a standard implementation, users have multiple roles, and roles are shared by multiple users. In a group implementation, groups have multiple roles and roles are shared by multiple groups. For the same reason we would use a join class between 'person' and 'authority', we should use one between 'group' and 'authority'.<p class="paragraph"/>If you run the <a href="../ref/Scripts/s2-quickstart.html" class="Scripts">s2-quickstart</a> script with the group name specified, this class will be generated for you, so you don't need to deal with the details of mapping it. Assuming you choose <code>com.mycompany.myapp</code> as your package, and <code>RoleGroup</code> and <code>Role</code> as your class names, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/><span class="java&#45;keyword">import</span> groovy.transform.ToString<p class="paragraph"/><span class="java&#45;keyword">import</span> org.apache.commons.lang.builder.HashCodeBuilder<p class="paragraph"/>@ToString(cache=<span class="java&#45;keyword">true</span>, includeNames=<span class="java&#45;keyword">true</span>, includePackage=<span class="java&#45;keyword">false</span>)
class RoleGroupRole <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   RoleGroup roleGroup
   Role role<p class="paragraph"/>   <span class="java&#45;object">boolean</span> equals(other) &#123;
      <span class="java&#45;keyword">if</span> (!(other <span class="java&#45;keyword">instanceof</span> RoleGroupRole)) &#123;
         <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span>
      &#125;<p class="paragraph"/>      other.role?.id == role?.id &#38;&#38;
      other.roleGroup?.id == roleGroup?.id
   &#125;<p class="paragraph"/>   <span class="java&#45;object">int</span> hashCode() &#123;
      def builder = <span class="java&#45;keyword">new</span> HashCodeBuilder()
      <span class="java&#45;keyword">if</span> (roleGroup) builder.append(roleGroup.id)
      <span class="java&#45;keyword">if</span> (role) builder.append(role.id)
      builder.toHashCode()
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> RoleGroupRole get(<span class="java&#45;object">long</span> roleGroupId, <span class="java&#45;object">long</span> roleId) &#123;
      RoleGroupRole.where &#123;
         roleGroup == RoleGroup.load(roleGroupId) &#38;&#38;
         role == Role.load(roleId)
      &#125;.get()
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> <span class="java&#45;object">boolean</span> exists(<span class="java&#45;object">long</span> roleGroupId, <span class="java&#45;object">long</span> roleId) &#123;
      RoleGroupRole.where &#123;
         roleGroup == RoleGroup.load(roleGroupId) &#38;&#38;
         role == Role.load(roleId)
      &#125;.count() &#62; 0
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> RoleGroupRole create(RoleGroup roleGroup, Role role, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      def instance = <span class="java&#45;keyword">new</span> RoleGroupRole(roleGroup: roleGroup, role: role)
      instance.save(flush: flush, insert: <span class="java&#45;keyword">true</span>)
      instance
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> <span class="java&#45;object">boolean</span> remove(RoleGroup rg, Role r, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (rg == <span class="java&#45;keyword">null</span> || r == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span> <span class="java&#45;keyword">false</span><p class="paragraph"/>      <span class="java&#45;object">int</span> rowCount = RoleGroupRole.where &#123;
         roleGroup == RoleGroup.load(rg.id) &#38;&#38;
         role == Role.load(r.id)
      &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; RoleGroupRole.withSession &#123; it.flush() &#125; &#125;<p class="paragraph"/>      rowCount &#62; 0
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> void removeAll(Role r, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (r == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span><p class="paragraph"/>      RoleGroupRole.where &#123;
         role == Role.load(r.id)
      &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; RoleGroupRole.withSession &#123; it.flush() &#125; &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> void removeAll(RoleGroup rg, <span class="java&#45;object">boolean</span> flush = <span class="java&#45;keyword">false</span>) &#123;
      <span class="java&#45;keyword">if</span> (rg == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span><p class="paragraph"/>      RoleGroupRole.where &#123;
         roleGroup == RoleGroup.load(rg.id)
      &#125;.deleteAll()<p class="paragraph"/>      <span class="java&#45;keyword">if</span> (flush) &#123; RoleGroupRole.withSession &#123; it.flush() &#125; &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      role validator: &#123; Role r, RoleGroupRole rg &#45;&#62;
         <span class="java&#45;keyword">if</span> (rg.roleGroup == <span class="java&#45;keyword">null</span> || rg.roleGroup.id == <span class="java&#45;keyword">null</span>) <span class="java&#45;keyword">return</span>
         <span class="java&#45;object">boolean</span> existing = <span class="java&#45;keyword">false</span>
         RoleGroupRole.withNewSession &#123;
            existing = RoleGroupRole.exists(rg.roleGroup.id, r.id)
         &#125;
         <span class="java&#45;keyword">if</span> (existing) &#123;
            <span class="java&#45;keyword">return</span> 'roleGroup.exists'
         &#125;
      &#125;
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      id composite: &#91;'roleGroup', 'role'&#93;
      version <span class="java&#45;keyword">false</span>
   &#125;
&#125;</pre></div>



<h2 id="requestmapClass">3.7 Requestmap Class</h2>
Optionally, use this class to store request mapping entries in the database instead of defining them with annotations or in <code>Config.groovy</code>. This option makes the class configurable at runtime; you can add, remove and edit rules without restarting your application.<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>requestMap.className</td><td>none</td><td>requestmap class name</td></tr><tr class="table-even"><td>requestMap.urlField</td><td>'url'</td><td>URL pattern field name</td></tr><tr class="table-odd"><td>requestMap.configAttributeField</td><td>'configAttribute'</td><td>authority pattern field name</td></tr><tr class="table-even"><td>requestMap.httpMethodField</td><td>'httpMethod'</td><td>HTTP method field name (optional, does not have to exist in the class if you don't require URL/method security)</td></tr></table><p class="paragraph"/>Assuming you choose <code>com.mycompany.myapp</code> as your package, and <code>Requestmap</code> as your class name, you'll generate this class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> com.mycompany.myapp<p class="paragraph"/><span class="java&#45;keyword">import</span> groovy.transform.ToString<p class="paragraph"/><span class="java&#45;keyword">import</span> org.apache.commons.lang.builder.HashCodeBuilder
<span class="java&#45;keyword">import</span> org.springframework.http.HttpMethod<p class="paragraph"/>@ToString(cache=<span class="java&#45;keyword">true</span>, includeNames=<span class="java&#45;keyword">true</span>, includePackage=<span class="java&#45;keyword">false</span>)
class Requestmap <span class="java&#45;keyword">implements</span> Serializable &#123;<p class="paragraph"/>   <span class="java&#45;keyword">private</span> <span class="java&#45;keyword">static</span> <span class="java&#45;keyword">final</span> <span class="java&#45;object">long</span> serialVersionUID = 1<p class="paragraph"/>   <span class="java&#45;object">String</span> configAttribute
   HttpMethod httpMethod
   <span class="java&#45;object">String</span> url<p class="paragraph"/>   Requestmap(<span class="java&#45;object">String</span> url, <span class="java&#45;object">String</span> configAttribute, HttpMethod httpMethod = <span class="java&#45;keyword">null</span>) &#123;
      <span class="java&#45;keyword">this</span>()
      <span class="java&#45;keyword">this</span>.configAttribute = configAttribute
      <span class="java&#45;keyword">this</span>.httpMethod = httpMethod
      <span class="java&#45;keyword">this</span>.url = url
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">int</span> hashCode() &#123;
      <span class="java&#45;keyword">new</span> HashCodeBuilder().append(configAttribute).append(httpMethod).append(url).toHashCode()
   &#125;<p class="paragraph"/>   @Override
   <span class="java&#45;object">boolean</span> equals(other) &#123;
      is(other) || (
         other <span class="java&#45;keyword">instanceof</span> Requestmap &#38;&#38;
         other.configAttribute == configAttribute &#38;&#38;
         other.httpMethod == httpMethod &#38;&#38;
         other.url == url)
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> mapping = &#123;
      cache <span class="java&#45;keyword">true</span>
   &#125;<p class="paragraph"/>   <span class="java&#45;keyword">static</span> constraints = &#123;
      configAttribute blank: <span class="java&#45;keyword">false</span>
      httpMethod nullable: <span class="java&#45;keyword">true</span>
      url blank: <span class="java&#45;keyword">false</span>, unique: 'httpMethod'
   &#125;
&#125;</pre></div><p class="paragraph"/>To use Requestmap entries to guard URLs, see <a href="../guide/single.html#requestmapInstances" class="guide">Requestmap Instances Stored in the Database</a>.



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/newInV2.html">&lt;&lt; <strong>2</strong><span>What's New in Version 2.0</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/requestMappings.html"><strong>4</strong><span>Configuring Request Mappings to Secure URLs</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Scripts/s2-create-persistent-token.html">s2-create-persistent-token</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Scripts/s2-quickstart.html">s2-quickstart</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
